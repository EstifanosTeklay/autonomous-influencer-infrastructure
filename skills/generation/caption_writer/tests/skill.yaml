id: caption_writer
version: 1.0.0
name: Caption Writer
description: |
  Generates persona-consistent social media captions for various platforms
  with appropriate tone, hashtags, and calls-to-action.

category: generation
author: Project Chimera Team
created_at: "2026-02-05T00:00:00Z"
updated_at: "2026-02-05T00:00:00Z"

# Input schema
input_schema:
  type: object
  required:
    - topic
    - persona_id
    - platform
  properties:
    topic:
      type: string
      description: "Main subject of the post"
      example: "Ethiopian coffee culture"
    persona_id:
      type: string
      description: "Agent persona ID (loads from SOUL.md)"
      example: "chimera_fashion_eth_001"
    platform:
      type: string
      enum: ["twitter", "instagram", "tiktok", "linkedin"]
      description: "Target social media platform"
    tone:
      type: string
      enum: ["excited", "professional", "casual", "empowering", "educational"]
      description: "Desired tone of the caption"
      default: "casual"
    max_length:
      type: integer
      description: "Maximum character count (platform-specific)"
      default: 2200
    include_hashtags:
      type: boolean
      description: "Whether to include hashtags"
      default: true
    include_call_to_action:
      type: boolean
      description: "Whether to include CTA (e.g., 'Comment below!')"
      default: true

# Output schema
output_schema:
  type: object
  required:
    - caption
    - character_count
    - platform_compliance
  properties:
    caption:
      type: string
      description: "Generated caption text"
    character_count:
      type: integer
      description: "Total character count"
    hashtags_used:
      type: integer
      description: "Number of hashtags included"
    estimated_engagement_score:
      type: number
      minimum: 0.0
      maximum: 1.0
      description: "Predicted engagement potential"
    platform_compliance:
      type: boolean
      description: "Whether caption meets platform requirements"

# MCP dependencies
mcp_servers:
  required:
    - llm  # LLM for text generation (Claude/Gemini)
    - weaviate  # For persona and memory retrieval
  optional: []

# Resource requirements
resources:
  estimated_cost_usd: 0.01  # Per execution (LLM call)
  avg_execution_time_ms: 2500
  requires_api_keys:
    - ANTHROPIC_API_KEY

# Constraints
constraints:
  rate_limit: 50/hour
  max_retries: 2
  timeout_seconds: 15
